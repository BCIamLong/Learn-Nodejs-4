{"mappings":"AAAA,kBAAkB,GAClB,gFAAgF;AAChF,gFAAgF;AEFhF,kBAAkB,GAClB,4EAA4E;AAC5E,MAAM,+BAAS,SAAS,aAAa,CAAC;AAC/B,MAAM,4CAAY,CAAC,MAAM;IAC9B,0CAA0C;IAC1C;IACA,0BAA0B;IAC1B,uHAAuH;IACvH,MAAM,SAAS,CAAC,yBAAyB,EAAE,KAAK,EAAE,EAAE,IAAI,MAAM,CAAC;IAC/D,6BAAO,kBAAkB,CAAC,cAAc;IACxC,8BAA8B;IAC9B,OAAO,UAAU,CAAC,IAAM,mCAAa;AACvC;AAEA,MAAM,kCAAY;IAChB,MAAM,UAAU,SAAS,aAAa,CAAC;IACvC,kCAAkC;IAClC,2JAA2J;IAC3J,4FAA4F;IAC5F,mGAAmG;IACnG,IAAI,SAAS,QAAQ,aAAa,CAAC,WAAW,CAAC;AACjD;;ADrBA,kBAAkB;AAGX,MAAM,4CAAQ,OAAO,OAAO;IACjC,0DAA0D;IAC1D,iBAAiB;IACjB,WAAW;IACX,cAAc;IACd,KAAK;IACL,qCAAqC;IACrC,iCAAiC;IACjC,qDAAqD;IACrD,iDAAiD;IACjD,kFAAkF;IAClF,+DAA+D;IAC/D,eAAe;IACf,0CAA0C;IAC1C,8DAA8D;IAC9D,OAAO;IACP,gCAAgC;IAChC,MAAM;IACN,kCAAkC;IAClC,sBAAsB;IACtB,oCAAoC;IACpC,4BAA4B;IAC5B,WAAW;IACX,0BAA0B;IAC1B,IAAI;IACJ,gEAAgE;IAChE,2HAA2H;IAC3H,uKAAuK;IACvK,MAAM,MAAM;QACV,QAAQ;QACR,KAAK;QACL,MAAM;mBAAE;sBAAO;QAAS;IAC1B,EACE,2BAA2B;KAC1B,IAAI,CAAC,CAAA;QACJ,oBAAoB;QACpB,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,WAAW;YACjC,+BAA+B;YAC/B,CAAA,GAAA,yCAAQ,EAAE,WAAW;YACrB,OAAO,UAAU,CAAC;gBAChB,8BAA8B;gBAC9B,sDAAsD;gBACtD,SAAS,MAAM,CAAC;YAClB,GAAG;QACL;IACF,GACC,KAAK,CAAC,CAAA;QACL,kCAAkC;QAClC,oCAAoC;QACpC,CAAA,GAAA,yCAAQ,EAAE,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO;IAC9C;AACJ;AAGO,MAAM,4CAAS;IACpB,IAAI;QACF,MAAM,MAAM,MAAM,MAAM;YACtB,QAAQ;YACR,KAAK;QACP;QACA,oBAAoB;QACpB,iWAAiW;QACjW,IAAI,IAAI,IAAI,EAAE,WAAW,WAAW;YAClC,CAAA,GAAA,yCAAQ,EAAE,WAAW;YACrB,OAAO,UAAU,CAAC;gBAChB,8RAA8R;gBAC9R,SAAS,MAAM,CAAC;YAClB,GAAG;QACL;IACF,EAAE,OAAO,KAAK;QACZ,yJAAyJ;QACzJ,oBAAoB;QACpB,CAAA,GAAA,yCAAQ,EAAE,SAAS,IAAI,QAAQ,EAAE,KAAK;IACxC;AACF;;;AE7EA,kBAAkB,GAClB,2LAA2L;AAC3L;AAqBO,MAAM,4CAAa,CAAA;IACxB,0LAA0L;IAE1L,4DAA4D;IAC5D,0DAA0D;IAC1D,YAAY,MAAM,CAAC,MAAM,GAAG;IAC5B,MAAM,MAAM,IAAI,YAAY,GAAG,CAAC;QAC9B,8GAA8G;QAC9G,uIAAuI;QACvI,WAAW;QACX,OAAO,YAAY,QAAQ,CAAC,OAAO;QACnC,YAAY;QACZ,sDAAsD;QACtD,MAAM;IAGR;IAEA,mGAAmG;IACnG,gEAAgE;IAChE,MAAM,SAAS,IAAI,YAAY,YAAY;IAE3C,UAAU,OAAO,CAAC,CAAA;QAChB,mNAAmN;QACnN,4CAA4C;QAC5C,MAAM,WAAW,SAAS,aAAa,CAAC;QACxC,SAAS,SAAS,GAAG;QAErB,mEAAmE;QACnE,eAAe;QACf,IAAI,YAAY,MAAM,CAAC;YACrB,SAAS;YACT,QAAQ;QACV,GACG,SAAS,CAAC,IAAI,WAAW,EACzB,KAAK,CAAC;QAET,cAAc;QACd,uDAAuD;QACvD,sEAAsE;QACtE,IAAI,YAAY,KAAK,CAAC;YACpB,QAAQ;YACR,cAAc;YACd,gBAAgB;YAChB,aAAa;QACf,GACG,SAAS,CAAC,IAAI,WAAW,EACzB,OAAO,CAAC,CAAC,OAAO,EAAE,IAAI,GAAG,CAAC,EAAE,EAAE,IAAI,WAAW,CAAC,IAAI,CAAC,EACnD,KAAK,CAAC;QAET,uDAAuD;QACvD,OAAO,MAAM,CAAC,IAAI,YAAY,MAAM,IAAI,IAAI,WAAW;IACzD;IAEA,2DAA2D;IAC3D,gIAAgI;IAChI,IAAI,SAAS,CAAC,QAAQ;QACpB,mEAAmE;QACnE,oGAAoG;QACpG,SAAS;YACP,KAAK;YACL,QAAQ;YACR,MAAM;YACN,OAAO;QACT;IACF;AACF;;;ACzFA,kBAAkB;AAIX,MAAM,4CAAiB,OAAO,MAAM;IACzC,IAAI;QACF,MAAM,MAAM,MAAM,MAAM;YACtB,QAAQ;YACR,KAAK;YACL,MAAM;sBAAE;uBAAM;YAAM;QACtB;QACA,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,WAAW;YACjC,CAAA,GAAA,yCAAQ,EAAE,WAAW;YACrB,OAAO,UAAU,CAAC,IAAM,SAAS,MAAM,CAAC,OAAO;QACjD;IACF,EAAE,OAAO,KAAK;QACZ,CAAA,GAAA,yCAAQ,EAAE,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,OAAO;IAC9C;AACF;;;AJXA,MAAM,+BAAS,SAAS,aAAa,CAAC;AACtC,MAAM,8BAAQ,SAAS,aAAa,CAAC;AACrC,MAAM,qCAAe,SAAS,aAAa,CAAC;AAC5C,MAAM,qCAAe,SAAS,aAAa,CAAC;AAE5C,oCAAc,iBAAiB,UAAU,SAAU,CAAC;IAClD,EAAE,cAAc;IAChB,MAAM,QAAQ,SAAS,aAAa,CAAC,UAAU,KAAK;IACpD,MAAM,OAAO,SAAS,aAAa,CAAC,SAAS,KAAK;IAClD,CAAA,GAAA,yCAAa,EAAE,MAAM;AACvB;AAEA,8BAAQ,iBAAiB,UAAU,SAAU,CAAC;IAC5C,EAAE,cAAc;IAChB,yEAAyE;IACzE,MAAM,QAAQ,SAAS,aAAa,CAAC,UAAU,KAAK;IACpD,MAAM,WAAW,SAAS,aAAa,CAAC,aAAa,KAAK;IAC1D,gCAAgC;IAChC,CAAA,GAAA,yCAAI,EAAE,OAAO;AACf;AAEA,oCAAc,iBAAiB,SAAS,SAAU,CAAC;IACjD,EAAE,cAAc;IAChB,CAAA,GAAA,yCAAK;AACP;AAEA,0EAA0E;AAC1E,qGAAqG;AACrG,qEAAqE;AACrE,IAAI,6BAAO;IACT,MAAM,gBAAgB,KAAK,KAAK,CAAC,4BAAM,OAAO,EAAE;IAChD,CAAA,GAAA,yCAAS,EAAE;AACb,EACA,8BAA8B","sources":["public/js/index.js","public/js/login.js","public/js/alert.js","public/js/mapbox.js","public/js/updateSettings.js"],"sourcesContent":["/* eslint-disable */\n// * so in index.js file we will import all files from other file in this folder\n// * and then when we build parcel it will take all code from all files into one\nimport { login, logout } from './login'; // eslint-disable-line\nimport { displayMap } from './mapbox';\nimport { updateUserData } from './updateSettings';\n\nconst formEl = document.querySelector('.login-form .form');\nconst mapEl = document.querySelector('#map');\nconst navLogoutBtn = document.querySelector('.nav__el--logout');\nconst userDataForm = document.querySelector('.form-user-data');\n\nuserDataForm?.addEventListener('submit', function (e) {\n  e.preventDefault();\n  const email = document.querySelector('#email').value;\n  const name = document.querySelector('#name').value;\n  updateUserData(name, email);\n});\n\nformEl?.addEventListener('submit', function (e) {\n  e.preventDefault();\n  // * with input element we can use .value to get value we enter in inputs\n  const email = document.querySelector('#email').value;\n  const password = document.querySelector('#password').value;\n  // console.log(email, password);\n  login(email, password);\n});\n\nnavLogoutBtn?.addEventListener('click', function (e) {\n  e.preventDefault();\n  logout();\n});\n\n// const locationsData = JSON.parse(mapEl.getAttribute('data-locations'));\n// * we have other way better to get data from data-locations attribute, that's technique use dataset\n// * data-locations => dataset.locations(set is represent for dash -)\nif (mapEl) {\n  const locationsData = JSON.parse(mapEl.dataset?.locations);\n  displayMap(locationsData);\n}\n// console.log(locationsData);\n","/* eslint-disable */\nimport { showAlert } from './alert';\n\nexport const login = async (email, password) => {\n  // const url = 'http://127.0.0.1:3000/api/v1/users/login';\n  // const data = {\n  //   email,\n  //   password,\n  // };\n  // * Use AJAX from Javascript support\n  // const res = await fetch(url, {\n  //   method: 'POST', // *GET, POST, PUT, DELETE, etc.\n  //   mode: 'cors', // no-cors, *cors, same-origin\n  //   cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n  //   credentials: 'same-origin', // include, *same-origin, omit\n  //   headers: {\n  //     'Content-Type': 'application/json',\n  //     // 'Content-Type': 'application/x-www-form-urlencoded',\n  //   },\n  //   body: JSON.stringify(data),\n  // });\n  // const check = await res.json();\n  // console.log(check);\n  // if (check.status === 'success') {\n  //   alert('Login success');\n  // } else {\n  //   alert(check.message);\n  // }\n  // * but we can use the library about AJAX which is called axios\n  // * a plug point for this axios that when the request AJAX is error it'll throw error for us and we can catch it to handle\n  // ! we can also us try catch here but it's only work for modern browser and if we want it's work for many browser especially for old browser we can use then() catch()\n  await axios({\n    method: 'POST',\n    url: 'http://127.0.0.1:3000/api/v1/users/login',\n    data: { email, password },\n  })\n    // .then(res => res.json())\n    .then(res => {\n      // console.log(res);\n      if (res.data.status === 'success') {\n        // alert('Login successfully');\n        showAlert('success', 'Login successfully');\n        window.setTimeout(() => {\n          // window.location.href = '/';\n          // * we can use 1 of two way to redirect to other page\n          location.assign('/');\n        }, 1500);\n      }\n    })\n    .catch(err => {\n      // console.log(err.response.data);\n      // alert(err.response.data.message);\n      showAlert('error', err.response.data.message);\n    });\n};\n\n// * we will logout with our logout from API\nexport const logout = async () => {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: 'http://127.0.0.1:3000/api/v1/users/logout',\n    });\n    // console.log(res);\n    // * we also need to reload page why? because we are codding  in front-end so we can't use render in here right, and reload page will send request with the empty the cookie to server and isLoginIn router will take it and not return user => in this time user is undefined and then the login in our pug file will check and display login and signup buttons\n    if (res.data?.status === 'success') {\n      showAlert('success', 'Logout successfully');\n      window.setTimeout(() => {\n        // * we can use reload page here with: location.reload(true), set option true to also force reload server, if we don't have this it's only reload with the cache which it's storage in the first time run and of course the page will not change and so it's important to set option true here\n        location.assign('/');\n      }, 1000);\n    }\n  } catch (err) {\n    // * usually we don't have error when we logout but to ensure like in the case we don't have the internet we also want to show nice notification for user\n    // console.log(err);\n    showAlert('error', err.response?.data.message);\n  }\n};\n","/* eslint disable */\n// * we need to config the alert because bt default from JS it look not good\nconst bodyEl = document.querySelector('body');\nexport const showAlert = (type, msg) => {\n  // * remove alert when we show other alert\n  hideAlert();\n  //type is success or error\n  // * of course that we need to create and style classes for alert in CSS and also HTML after that we add it via JS code\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  bodyEl.insertAdjacentHTML('afterbegin', markup);\n  // * remove alert in 3 seconds\n  window.setTimeout(() => hideAlert(), 3000);\n};\n\nconst hideAlert = () => {\n  const alertEl = document.querySelector('.alert');\n  // ? so why we need to check this?\n  // * because if we use alertEl.remove() so in the case we have many alert classes element in our HTML alertEl.remove() alway remove the first alert element\n  // ! and there fore we need to use this trick to remove exactly alert element we will remove\n  // * How it work: 1 we will find alert parent element, 2 then remove alert from this parent element\n  if (alertEl) alertEl.parentElement.removeChild(alertEl);\n};\n","/* eslint-disable */\n// ! we need to turn off eslint here because it's setup for nodejs, so some variable in normal js in JS DOM like document not have in nodejs right so it'll catch err if we use eslint here\n'use strict';\n\n// const tourName = document.querySelector('.heading-primary span');\n// console.log(tourName.innerHTML);\n\n// // * to retrieve our data from tour we can use ajax request basically to call our API and get the tour data\n// const getTour = async () => {\n//   // * AJAX\n//   const res = await fetch('/api/v1/tours');\n//   const toursData = await res.json();\n//   return toursData;\n// };\n\n// (async () => {\n//   const tours = await getTour();\n//   console.log(tours);\n// })();\n// ! but in this case use AJAX is not necessary we have other way which is handy more\n// * that we will put the locations of tour data in HTML attribute which is called data-name_data= value\n// * this is nice trick when we want put the necessary data into element\n// * in this case we can use  data-locations= value\nexport const displayMap = locations => {\n  // * so with map we don't use google map instead we use mapbox why because sometime the google map will require the credit to perform action so its not good for our because we only learn\n\n  // * there for we will use mapbox: https://docs.maptiler.com\n  // ! https://docs.maptiler.com/sdk-js/api/map/#map-options\n  maptilersdk.config.apiKey = 'Q7Vgp9F8J5vS7jWT7dCb';\n  const map = new maptilersdk.Map({\n    // * now we don't want center map, we want the map automatically find the tour location and display that place\n    // * so we will put all locations points in map and the map will find and display the map fit with these points and display all of them\n    container: 'map', // container's id or the HTML element to render the map\n    style: maptilersdk.MapStyle.STREETS,\n    scrollZoom: false, // * we don't want when we scroll thought this map and zoom the map right we only scroll in website so we need to disable this option\n    // center: [-118, 34], // starting position [lng, lat]\n    zoom: 1, // starting zoom\n    // * so with interactive false we don't scroll mouse on map, so we do not anything with map and only watch\n    // interactive: false,\n  });\n\n  // * so we will create part with tour locations by create bound, and then put it to map and display\n  // !https://docs.maptiler.com/sdk-js/api/geography/#lnglatbounds\n  const bounds = new maptilersdk.LngLatBounds();\n\n  locations.forEach(loc => {\n    // * we can use default marker from map library but usually it's not good choice why? because it might in the same with other website if they also use this marker, and by default it might not fit with our design\n    // * therefore we need to custom this marker\n    const markerEl = document.createElement('div');\n    markerEl.className = 'marker';\n\n    //! https://docs.maptiler.com/sdk-js/api/markers/#marker#getelement\n    // * add marker\n    new maptilersdk.Marker({\n      element: markerEl,\n      anchor: 'bottom',\n    })\n      .setLngLat(loc.coordinates)\n      .addTo(map);\n\n    // * add popup\n    // !https://docs.maptiler.com/sdk-js/api/markers/#popup\n    // * we can specify some options to config this popup it's on document\n    new maptilersdk.Popup({\n      offset: 30,\n      closeOnClick: false,\n      focusAfterOpen: false,\n      closeButton: false,\n    })\n      .setLngLat(loc.coordinates)\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\n      .addTo(map);\n\n    // * Extend map bounds to include the current locations\n    bounds.extend(new maptilersdk.LngLat(...loc.coordinates));\n  });\n\n  // !https://docs.maptiler.com/sdk-js/api/map/#map#fitbounds\n  // ! note that we need to give zoom a value like default value it might 1,2,3... any number we want then the map will replace it\n  map.fitBounds(bounds, {\n    // !https://docs.maptiler.com/sdk-js/api/properties/#paddingoptions\n    // * we can custom the padding of display map in some reason, in this case that's because our design\n    padding: {\n      top: 200,\n      bottom: 200,\n      left: 100,\n      right: 100,\n    },\n  });\n};\n","/* eslint-disable */\n\nimport { showAlert } from './alert';\n\nexport const updateUserData = async (name, email) => {\n  try {\n    const res = await axios({\n      method: 'PATCH',\n      url: 'http://127.0.0.1:3000/api/v1/users/me',\n      data: { name, email },\n    });\n    if (res.data.status === 'success') {\n      showAlert('success', 'Update your data successfully');\n      window.setTimeout(() => location.reload(true), 1000);\n    }\n  } catch (err) {\n    showAlert('error', err.response.data.message);\n  }\n};\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../"}